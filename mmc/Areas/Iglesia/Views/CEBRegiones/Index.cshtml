@using mmc.Utilidades;
@model IEnumerable<mmc.Modelos.ViewModels.IglesiaVM.CebLiderPrivilegioVM>


@{
    Layout = "~/Views/Shared/_Layout_Menu_lateral.cshtml";
    ViewData["Title"] = "IGLESIA DE JESUCRISTO LA FAMILIA DE DIOS.";
}


    <div class="text-center h4">@ViewBag.region</div>
    <br />

<div class="h4 row">
    <div class="col-8">
            <label>
            Agregar nueva Casa de Estudio Bíblico para esta Región.
            </label>
    </div>
    <div class="col-4 text-right">
        <a class="btn btn-primary" asp-action="addCab_byLider" asp-route-id="@ViewBag.regionId"> <i class="fa-sharp fa-solid fa-house-user"></i> Añadir </a>
    </div>
</div>

<br />

<table class="table table-striped table-bordered dt-responsive" style="width:100%" id="myTable">
    <thead class="thead-dark">
            <tr>
                <th>
                    Nombres
                </th>
            @*                <th>
            @Html.DisplayNameFor(Model => Model.Apellido)
            </th>*@
                <th>
                    @Html.DisplayNameFor(Model => Model.Direccion)
                </th>
                <th>
                    @Html.DisplayNameFor(Model => Model.Telefono)
                </th>
                <th>
                    @Html.DisplayNameFor(Model => Model.Dia)
                </th>
                <th>
                    @Html.DisplayNameFor(Model => Model.Hora)
                </th>
                <th>
                    @Html.DisplayNameFor(Model => Model.Tipo)
                </th>
                <th>
                    @Html.DisplayNameFor(Model => Model.Cargo)
                </th>
                <th>
                    @Html.DisplayNameFor(Model => Model.Estado)
                </th>
                <th>
                    Acciones
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                    @Html.DisplayFor(modelItem => item.Nombre) @Html.DisplayFor(modelItem => item.Apellido)
                    </td>
                    @*<td>
                    @Html.DisplayFor(modelItem => item.Apellido)
                    </td>*@
                    <td>
                        @Html.DisplayFor(modelItem => item.Direccion)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Telefono)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Dia)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Hora)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Tipo)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Cargo)
                    </td>
                     @if(item.Estado == true)
                        {
                        <td class="text-success">
                            <b>Activo</b>
                        </td>
                        }
                     else if(item.Estado == false)
                        {
                        <td class="text-danger">
                            <b>Inactivo</b>
                        </td>
                        }
                    <td>
                    <a href="/Iglesia/CEBRegiones/LiderdeCEB/@item.cebid" class="text-primary" style="cursor:pointer">
                            <i class="fa-solid fa-house-medical-flag"></i>
                        </a>
                    <a href="/Iglesia/CEBRegiones/EditarCabCeb/@item.cebid" class="text-warning" style="cursor:pointer">
                        <i class="fa-solid fa-house-medical-circle-check"></i>
                    </a>
                    @if (User.IsInRole(DS.Role_Admin) || User.IsInRole(DS.Role_Iglesia))
                    {
                      <a onclick=Delete("/Iglesia/CEBRegiones/DeleteCab/@item.cebid")>
                        <i class="fa-solid fa-trash-can text-danger"></i>
                     </a>
                     <a href="/Iglesia/MiembrosCEB/Upsert/@item.id" class="text-success" style="cursor:pointer">
                        <i class="fa-solid fa-user-pen"></i>
                    </a>
                    }


                    </td>
                </tr>
            }
        </tbody>

    </table>

<br />
<hr />

@section Scripts{
    <script>
        $(document).ready(function () {
            $('#myTable').DataTable();
        });


        function Delete(url) {
            swal({
                title: "Esta Seguro que quiere Eliminar el registro?",
                text: "Este Registro no se podra recuperar",
                icon: "warning",
                buttons: true,
                dangerMode: true
            }).then((borrar) => {
                if (borrar) {
                    $.ajax({
                        type: "DELETE",
                        url: url,
                        success: function (data) {
                            if (data.success) {
                                toastr.success(data.message);
                                datatable.ajax.reload();
                                location.reload();
                            }
                            else {
                                toastr.error(data.message);
                            }
                        }
                    });
                }
            });
        }
    </script>
}
