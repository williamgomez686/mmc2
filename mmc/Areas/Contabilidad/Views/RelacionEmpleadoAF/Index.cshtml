@*@model IEnumerable<mmc.Modelos.OracleModels.RRHH.RHEMPLEADOSRELACIONLAB>
*@

@model mmc.Utilidades.DataPaginador<mmc.Modelos.OracleModels.RRHH.RHEMPLEADOSRELACIONLAB>

@{
    ViewData["Title"] = "Empleados";
    Layout = "~/Views/Shared/_Layout_Menu_lateral.cshtml";
}

<h2>Lista de Empleados</h2>
<br />
<div>
    <form action="/Contabilidad/RelacionEmpleadoAF/Index" method="get">
        <div class="row">
            <div class="col-md-4">
                <input type="search" name="Search" class="form-control" placeholder="Buscar por Código, Nombre o Apellido " />
               
            </div>
@*            <div class="col-md-3">
                <input type="search" name="Searchcode" class="form-control" placeholder="Bucar por codigo" />

            </div>*@

            <div class="col-md-5 ">
                <label>Cantidad de registros deseados</label>
                <select name="Registros">
                    <option>10</option>
                    <option>15</option>
                    <option>20</option>
                </select>
            </div>
            <br />
        </div>
    </form>
</div>
<br />

<div class="text-center">
    @Html.Raw(Model.Pagi_navegacion)
</div>

<div class="col-md-12">
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                
                <th>Código</th>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Sexo</th>
                @*            <th>Fecha de Nacimiento</th>*@
                @*            <th>Dirección</th>*@
                <th>Tel. Casa</th>
                <th>Celular</th>
                @*            <th>DPI</th>
                <th>NIT</th>*@
                <th>Foto</th>

            </tr>
        </thead>
        <tbody>
            @foreach (var empleado in Model.Lista)
            {
                <tr>
                    <td>
                        <a class="" href="@Url.Action("VerActivosFijos", "RelacionEmpleadoAF", new { area = "Contabilidad", codigoEmpleado = empleado.EMPLEMPCOD })">@empleado.EMPLEMPCOD</a>
                    </td>
         @*           <td>@empleado.EMPLEMPCOD</td>*@
                    <td>@empleado.EMPLEMPNOM</td>
                    <td>@empleado.EMPLEMPAPE</td>
                    <td>@empleado.EMPLEMPSEXO</td>
                    @*                <td>@empleado.EMPLEMPFCHANAC.ToString("dd/MM/yyyy")</td>*@
                    @* <td>@empleado.EMPLEMPDIRECCION</td>*@
                    <td>@empleado.EMPLEMPTELRESI</td>
                    <td>@empleado.EMPLEMPTELMOVIL</td>
                    @*                <td>@empleado.DPI</td>
                <td>@empleado.EMPLEMPNIT</td>*@
                    <td>@empleado.EMPLEMPFOTO</td>

                </tr>
            }
        </tbody>
    </table>
</div>

<div class="text-center">
    @Html.Raw(Model.Pagi_info)
    <br />
    @Html.Raw(Model.Pagi_navegacion)
</div>



@section Scripts {

    <script>
        async function verActivosFijos(codigoEmpleado) {
            try {
                // Obtener la URL con el área utilizando Razor
                var url = '@Url.Action("VerActivosFijos", "RelacionEmpleadoAF", new { area = "Contabilidad" })';

                // Agregar el parámetro de códigoEmpleado a la URL
                url += '?codigoEmpleado=' + encodeURIComponent(codigoEmpleado);

                // Realizar la solicitud Fetch para enviar el código al controlador
                const response = await fetch(url);

                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }

                const data = await response.json();

                // Aquí puedes hacer algo con la respuesta del controlador (data)
                // Por ejemplo, mostrar los activos fijos en una modal o en otra vista
                // dependiendo de cómo quieras presentarlos.
            } catch (error) {
                // Manejo de errores si la solicitud Fetch falla
                console.error('Error:', error);
            }
        }
    </script>


}