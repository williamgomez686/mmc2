@model IEnumerable<mmc.Modelos.ContabilidadModels.DiarioXMotivoVM>
@{
    ViewData["Title"] = "Diario por Motivo";
    //Layout = "~/Views/Shared/_Layout.cshtml";
    Layout = "~/Views/Shared/_Layout_Menu_lateral.cshtml";
}

@if (@ViewBag.Titulo == null)
{
    <h3 class="text-center">MOTIVO: TODOS LOS MOTIVOS </h3>
}else 
{
    <h3 class="text-center">MOTIVO: @ViewBag.Titulo </h3>
}


<table class="table table-striped table-bordered" id="myTable">
    <thead class="thead-dark">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.DOCUMENTO)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TIPO)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.FECHA)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TOTAL)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.LIQUIDACION)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.NOMBRE)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CLIENTE)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PROMESA)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.MOTIVO_DESC)
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.DOCUMENTO)
                </td>
                @if (item.TIPO == "RU")
                {
                <td>
                    RUTA
                </td>
                } else if (item.TIPO == "CA" || item.TIPO == "DE" )
                {
                 <td>
                    CAJA
                </td>
                }
                <td>
                    @Html.DisplayFor(modelItem => item.FECHA)
                </td>                
                <td>
                    @Html.DisplayFor(modelItem => item.TOTAL)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.LIQUIDACION)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.NOMBRE)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CLIENTE)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PROMESA)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.MOTIVO_DESC)
                </td>
            </tr>
        }
    </tbody>
</table>

<hr />
<hr />

@section Scripts{
    <script>
        $(document).ready(function () {
            $('#myTable').DataTable();
            console.log("hola");
        });


        function Delete(url) {
            swal({
                title: "Esta Seguro que quiere Eliminar el registro?",
                text: "Este Registro no se podra recuperar",
                icon: "warning",
                buttons: true,
                dangerMode: true
            }).then((borrar) => {
                if (borrar) {
                    $.ajax({
                        type: "DELETE",
                        url: url,
                        success: function (data) {
                            if (data.success) {
                                toastr.success(data.message);
                                datatable.ajax.reload();
                                location.reload();
                            }
                            else {
                                toastr.error(data.message);
                            }
                        }
                    });
                }
            });
        }
    </script>
}